<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>Main</name>
    <events>
        <include>Archer</include>
        <variable constant="0" name="Spawntime" sid="1956364368295446" static="0" type="number">1</variable>
        <comment>Kick off the first enemy moving.</comment>
        <event-block sid="3783202040741007">
            <conditions>
                <condition id="-2" name="On start of layout" sid="165633042846889" type="System" />
            </conditions>
            <actions>
                <action behavior="Pathfinding" id="0" name="Find path" sid="2439049256079592" type="dino">
                    <param id="0" name="X">MainTower.X</param>
                    <param id="1" name="Y">MainTower.Y</param>
                </action>
            </actions>
        </event-block>
        <comment>Every spawntime seconds, but gradually reducing the interval, spawn a new enemy and move it to the target.</comment>
        <event-block sid="344252803636845">
            <conditions>
                <condition id="-6" name="Every X seconds" sid="1571873979693581" type="System">
                    <param id="0" name="Interval (seconds)">Spawntime</param>
                </condition>
            </conditions>
            <actions>
                <action id="0" name="Spawn another object" sid="7903955168108495" type="EnemySpawner">
                    <param id="0" name="Object">dino</param>
                    <param id="1" name="Layer">1</param>
                    <param id="2" name="Image point">0</param>
                </action>
                <action behavior="Pathfinding" id="0" name="Find path" sid="3129230281981013" type="dino">
                    <param id="0" name="X">MainTower.X</param>
                    <param id="1" name="Y">MainTower.Y</param>
                </action>
            </actions>
            <sub-events>
                <event-block sid="8639438502418286">
                    <conditions>
                        <condition id="-14" name="Compare variable" sid="9931038347330668" type="System">
                            <param id="0" name="Variable">Spawntime</param>
                            <param id="1" name="Comparison">4</param>
                            <param id="2" name="Value">0.5</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-11" name="Subtract from" sid="806962488770075" type="System">
                            <param id="0" name="Variable">Spawntime</param>
                            <param id="1" name="Value">0.1</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-block>
        <comment>Gates, that open and close at timings for dynamic paths of dinos</comment>
        <event-block sid="8690376723778819">
            <conditions>
                <condition id="-6" name="Every X seconds" sid="1421454163423543" type="System">
                    <param id="0" name="Interval (seconds)">6</param>
                </condition>
            </conditions>
            <actions>
                <action behavior="Solid" id="0" name="Set enabled" sid="4532333313171468" type="gates">
                    <param id="0" name="State">0</param>
                </action>
                <action id="-15" name="Set visible" sid="3957178911194655" type="gates">
                    <param id="0" name="Visibility">0</param>
                </action>
                <action behavior="Pathfinding" disabled="1" id="4" name="Regenerate obstacle map" sid="9365986966686709" type="dino" />
            </actions>
        </event-block>
        <event-block sid="4024490877959341">
            <conditions>
                <condition id="-6" name="Every X seconds" sid="2822351930760777" type="System">
                    <param id="0" name="Interval (seconds)">12</param>
                </condition>
            </conditions>
            <actions>
                <action behavior="Solid" id="0" name="Set enabled" sid="2704263230319313" type="gates">
                    <param id="0" name="State">1</param>
                </action>
                <action id="-15" name="Set visible" sid="8057523312788682" type="gates">
                    <param id="0" name="Visibility">1</param>
                </action>
                <action behavior="Pathfinding" disabled="1" id="4" name="Regenerate obstacle map" sid="2909185554798357" type="dino" />
            </actions>
        </event-block>
        <comment>When at Gates, rethink about new path</comment>
        <event-block sid="6693957405393997">
            <conditions>
                <condition id="0" name="On collision with another object" sid="5010216628285482" type="dino">
                    <param id="0" name="Object">gates</param>
                </condition>
            </conditions>
            <actions>
                <action behavior="Pathfinding" id="4" name="Regenerate obstacle map" sid="8854588188145687" type="dino" />
            </actions>
        </event-block>
        <comment>Once a path has been found, start moving along it.</comment>
        <event-block sid="6325717615074482">
            <conditions>
                <condition behavior="Pathfinding" id="0" name="On path found" sid="7854939918750287" type="dino" />
            </conditions>
            <actions>
                <action behavior="Pathfinding" id="1" name="Move along path" sid="565558946422964" type="dino" />
            </actions>
        </event-block>
        <event-group description="" sid="6550445294359285" title="WayPoint System">
            <sub-events>
                <comment>WAYPOINT Collisions</comment>
                <event-block disabled="1" sid="9913486605319977">
                    <conditions>
                        <condition id="-8" name="Compare two values" sid="7066134757907033" type="System">
                            <param id="0" name="First value">distance(dino.X,dino.Y,Target1.X,target1.Y)</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Second value">80</param>
                        </condition>
                        <condition id="-4" name="Trigger once while true" sid="9810605754712549" type="System" />
                    </conditions>
                    <actions>
                        <action behavior="Pathfinding" id="0" name="Find path" sid="6308628623342853" type="dino">
                            <param id="0" name="X">MainTower.X</param>
                            <param id="1" name="Y">MainTower.Y</param>
                        </action>
                    </actions>
                </event-block>
                <event-block disabled="1" sid="3053673677557722">
                    <conditions>
                        <condition id="-8" name="Compare two values" sid="8932298110032887" type="System">
                            <param id="0" name="First value">distance(dino.X,dino.Y,Target2.X,target2.Y)</param>
                            <param id="1" name="Comparison">3</param>
                            <param id="2" name="Second value">80</param>
                        </condition>
                        <condition id="-4" name="Trigger once while true" sid="4763934124139782" type="System" />
                    </conditions>
                    <actions>
                        <action behavior="Pathfinding" id="0" name="Find path" sid="9079446193286658" type="dino">
                            <param id="0" name="X">MainTower.X</param>
                            <param id="1" name="Y">MainTower.Y</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="1891450603548371">
                    <conditions>
                        <condition id="0" name="On collision with another object" sid="9052213507448506" type="MainTower">
                            <param id="0" name="Object">dino</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="-9" name="Destroy" sid="2918144254792174" type="dino" />
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" sid="8060590077505716" title="DEBUG">
            <sub-events>
                <event-block sid="9301252815410587">
                    <conditions>
                        <condition id="-1" name="Every tick" sid="9771196842277153" type="System" />
                    </conditions>
                    <actions>
                        <action id="0" name="Set text" sid="497848276014999" type="debugbox">
                            <param id="0" name="Text">dino.pathfinding.MovingAngle</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="8040504707254973">
                    <conditions>
                        <condition behavior="Pathfinding" id="1" name="On failed to find path" sid="4145867297752589" type="dino" />
                    </conditions>
                    <actions>
                        <action behavior="Flash" id="0" name="Flash" sid="8086366817319898" type="dino">
                            <param id="0" name="&apos;On&apos; time">0.5</param>
                            <param id="1" name="&apos;Off&apos; time">0.5</param>
                            <param id="2" name="Duration">5</param>
                        </action>
                    </actions>
                </event-block>
            </sub-events>
        </event-group>
    </events>
</c2eventsheet>
